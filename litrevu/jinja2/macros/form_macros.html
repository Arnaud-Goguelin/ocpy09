{# templates/jinja2/macros/form_macros.html #}

<!--standard form field macro-->
{% macro render_field(field, css_class="form-input", wrapper_class="mb-md") %}
<div class="{{ wrapper_class }}">
    <label class="block mb-xs" for="{{ field.id_for_label }}">
        {{ field.label }}
        {% if field.field.required %}
            <span class="bold error-text mt-sm">*</span>
        {% endif %}
    </label>
    
    {% set field_attrs = {"class": css_class} %}
    {% for key, value in kwargs.items() %}
        {% set _ = field_attrs.update({key: value}) %}
    {% endfor %}

<!--    render field with received attributes: {{ field_attrs }}-->
    {{ field.as_widget(attrs=field_attrs) }}
    
    {% if field.help_text %}
        <small class="help-text mt-sm">{{ field.help_text }}</small>
    {% endif %}
    
    {% if field.errors %}
        <span class="bold error-text mt-sm">{{ field.errors[0] }}</span>
    {% endif %}
</div>
{% endmacro %}
