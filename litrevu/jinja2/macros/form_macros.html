{# templates/jinja2/macros/form_macros.html #}

<!--standard form field macro-->
{% macro render_field(field, css_class="form-input", wrapper_class="mb-md") %}
<div class="{{ wrapper_class }}">
    <label class="block mb-xs" for="{{ field.id_for_label }}">
        {{ field.label }}
        {% if field.field.required %}
            <span class="text-red">*</span>
        {% endif %}
    </label>
    
    {% set field_attrs = {"class": css_class} %}
    {% for key, value in kwargs.items() %}
        {% set _ = field_attrs.update({key: value}) %}
    {% endfor %}

<!--    render field with received attributes: {{ field_attrs }}-->
    {{ field.as_widget(attrs=field_attrs) }}
    
    {% if field.help_text %}
        <small class="form-help text-gray-600">{{ field.help_text }}</small>
    {% endif %}
    
    {% if field.errors %}
        <span class="form-error text-red">{{ field.errors[0] }}</span>
    {% endif %}
</div>
{% endmacro %}

<!--standard button macro-->
{% macro action_buttons(primary_text="Envoyer", primary_type="submit", cancel_url=None, cancel_text="Annuler", cancel_class="primary-btn") %}
<div class="flex --flex-start mb-md">
    {% if cancel_url %}
        <a class="{{ cancel_class }}" href="{{ cancel_url }}">{{ cancel_text }}</a>
    {% endif %}
    <button class="primary-btn {% if cancel_url %}ml-lg{% endif %}" type="{{ primary_type }}">
        {{ primary_text }}
    </button>
</div>
{% endmacro %}

